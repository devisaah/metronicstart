<%%- model_class = <%= singular_table_name.titleize %> -%>

<%% remote ||= remote %>
<%% resource ||= resource %>

<div class="accordion accordion-toggle-plus" id="accordion<%= singular_table_name.capitalize %>">
  <div class="card">
    <div class="card-header" id="heading<%= singular_table_name.capitalize %>">
      <div class="card-title collapsed" data-toggle="collapse" data-target="#collapse<%= singular_table_name.capitalize %>" aria-expanded="false" aria-controls="collapse<%= singular_table_name.capitalize %>">
        <%%= model_class.model_name.human(count: 2).titleize %>
      </div>
    </div>
    <div id="collapse<%= singular_table_name.capitalize %>" class="collapse" aria-labelledby="heading<%= singular_table_name.capitalize %>" data-parent="#accordion<%= singular_table_name.capitalize %>" style="">
      <div class="card-body">
        <div class="float-right row mb-5">
          <div class="col-lg-12">
            <%%= link_to new_<%= singular_table_name %>_path, class: "btn btn-success font-weight-bolder", remote: remote do %>
              <i class="la la-plus"></i>  <%%= t('helpers.titles.new', :model => model_class.model_name.human.titleize) %>
            <%% end %>
          </div>
        </div>
        <div class="table-responsive">
          <table class="table table-bordered table-hover table-<%= plural_table_name %>">
            <thead>
              <tr>
              <th>#</th>
              <% attributes.without(name_attribute).each do |attribute| -%>
                <% unless attribute.name.downcase == 'deleted_at' %>
                  <th><%%= model_class.human_attribute_name(:<%= attribute.name.downcase %>) %></th>
                <% end %>
              <% end -%>
              <th><%%= t("helpers.actions") %></th>
              </tr>
            </thead>
            <tbody data-link="row" class="rowlink tbody-<%= plural_table_name %>">
              <%% resource.try(:each_with_index) do |<%= singular_table_name %>, index| %>
                <%%= content_tag :tr, id: dom_id(<%= singular_table_name %>), class: dom_class(<%= singular_table_name %>) do %>
                  <td><%%= index + 1 %></td>
                  <% if has_name %>
                    <td><%%= link_to <%= singular_table_name %>.name, <%= singular_table_name %> %></td>
                  <% end %>

                  <% attributes.without(name_attribute).each do |attribute| -%>
                    <% unless attribute.name.downcase == 'deleted_at' %>
                      <td><%%= <%= singular_table_name %>.<%= attribute.name %> %></td>
                    <% end %>
                  <% end -%>

                  <% unless has_name %>
                      <td class=" rowlink-skip col-md-2 coluna-opcoes">
                        <%%= link_to <%= singular_table_name %>_path(<%= singular_table_name %>), remote: remote, :class => 'btn btn-primary btn-icon btn-sm', title: "Visualizar", data: {toggle: "tooltip", placement: "top"} do %>
                          <i class='la la-search'></i>
                        <%% end %>

                        <%%= link_to edit_<%= singular_table_name %>_path(<%= singular_table_name %>), :remote => remote, :class => 'btn btn-warning btn-icon btn-sm', title: "Editar", data: {toggle: "tooltip", placement: "top"} do %>
                          <i class='la la-pencil-square'></i>
                        <%% end %>

                        <%%= link_to <%= singular_table_name %>_path(<%= singular_table_name %>),
                          method: :delete,
                          data: { confirm: t('helpers.links.confirm_destroy', :model => model_class.model_name.human), toggle: "tooltip", placement: "top" },
                          :remote =>  remote,
                          class: "btn btn-danger btn-icon btn-sm", title: "Remover" do %>
                          <i class='la la-trash'></i>
                        <%% end %>
                      </td>
                  <% end %>
                <%% end %>
              <%% end %>
            </tbody>
          </table>
        </div>

      </div>
    </div>
  </div>
</div>
<hr>
