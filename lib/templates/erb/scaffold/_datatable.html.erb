<% name_attribute = attributes.find{ |a| a.name == "name" } %>
<% has_name = !!name_attribute %>


<%%- model_class = <%= singular_table_name.titleize %> -%>

<%% id ||= Time.now.to_i %>
<%% remote ||= remote %>


<%% content_for :portlet_actions do %>
	<%%= link_to new_<%= singular_table_name %>_path, class: "btn btn-success font-weight-bolder", remote: remote do %>
		<i class="la la-plus"></i>  <%%= t('helpers.titles.new', :model => model_class.model_name.human.titleize) %>
	<%% end %>
<%% end %>


<div class="table-responsive">
	<table class="table table-bordered table-hover table-<%= plural_table_name %>" id="table-<%= plural_table_name %>-<%%= id %>">
		<thead>
			<tr>
			<th>#</th>
			<% attributes.without(name_attribute).each do |attribute| -%>
				<% unless attribute.human_name.downcase == 'deleted at' %>
					<th><%%= model_class.human_attribute_name(:<%= attribute.human_name.downcase %>) %></th>
				<% end %>
			<% end -%>
			<th><%%= t("helpers.actions") %></th>
			</tr>
		</thead>
		<tbody data-link="row" class="rowlink tbody-<%= plural_table_name %>">
			<%% @<%= plural_table_name%>.each do |<%= singular_table_name %>| %>
				<%%= content_tag :tr, id: dom_id(<%= singular_table_name %>), class: dom_class(<%= singular_table_name %>) do %>
					<% if has_name %>
						<td><%%= link_to <%= singular_table_name %>.name, <%= singular_table_name %> %></td>
					<% end %>

					<% attributes.without(name_attribute).each do |attribute| -%>
						<% unless attribute.name.downcase == 'deleted at' %>
							<td><%%= <%= singular_table_name %>.<%= attribute.name %> %></td>
						<% end %>
					<% end -%>

					<% unless has_name %>
							<td class=" rowlink-skip col-md-2 coluna-opcoes">
								<%%= link_to <%= singular_table_name %>_path(<%= singular_table_name %>), remote: remote, :class => 'btn btn-primary btn-icon btn-sm', title: "Visualizar", data: {toggle: "tooltip", placement: "top"} do %>
									<i class='la la-search'></i>
								<%% end %>

								<%%= link_to edit_<%= singular_table_name %>_path(<%= singular_table_name %>), :remote => remote, :class => 'btn btn-warning btn-icon btn-sm', title: "Editar", data: {toggle: "tooltip", placement: "top"} do %>
									<i class='la la-pencil-square'></i>
								<%% end %>

								<%%= link_to <%= singular_table_name %>_path(<%= singular_table_name %>),
									method: :delete,
									data: { confirm: t('helpers.links.confirm_destroy', :model => model_class.model_name.human), toggle: "tooltip", placement: "top" },
									:remote =>  remote,
									class: "btn btn-danger btn-icon btn-sm", title: "Remover" do %>
									<i class='la la-trash'></i>
								<%% end %>
							</td>
					<% end %>
				<%% end %>
			<%% end %>
		</tbody>
	</table>
</div>
